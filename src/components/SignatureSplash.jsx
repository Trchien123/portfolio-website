import React, { useState, useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";

const SignatureSplash = ({ onComplete }) => {

  useEffect(() => {
    // Lock Scrolling
    document.body.style.overflow = "hidden";

    // Time out
    const timer = setTimeout(() => {
      if (onComplete) onComplete();
    }, 3000);

    return () => {
      clearTimeout(timer);
      document.body.style.overflow = "unset";
    };

  }, [onComplete]);

  // Draw animation settings
  const drawAnimation = {
    hidden: { pathLength: 0, opacity: 0 },
    visible: {
      pathLength: 1,
      opacity: 1,
      transition: {
        pathLength: { duration: 2, ease: "easeInOut" },
        opacity: { duration: 0.2 },
      },
    },
  };

  return (
    <motion.div
      initial={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      transition={{ duration: 0.8 }}
      style={overlayStyles}
    >
      <motion.svg
        viewBox="100 85 200 80"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        style={svgStyles}
      >
        {/* Sign Part */}
        <motion.path
          d="M 122.925781 102.074219 C 120.523438 99.601562 119.773438 99.675781 118.949219 99.898438 C 117.375 100.273438 114.601562 102.226562 113.101562 103.5 C 111.976562 104.398438 111.226562 105.148438 110.398438 106.425781 C 109.199219 108.375 107.773438 111.75 107.25 114.300781 C 106.726562 116.398438 106.574219 118.875 106.875 120.523438 C 107.023438 121.726562 107.175781 122.476562 108 123.375 C 109.5 125.101562 114.300781 127.425781 117.074219 128.101562 C 119.101562 128.625 120.976562 128.699219 122.699219 128.101562 C 124.648438 127.5 126.226562 125.925781 128.101562 124.351562 C 130.574219 122.25 133.425781 119.398438 135.976562 116.476562 C 138.75 113.25 142.351562 108.976562 144.148438 105.675781 C 145.425781 103.273438 146.175781 101.550781 146.550781 99 C 147.074219 96 147.226562 89.398438 146.175781 88.648438 C 145.648438 88.351562 144.675781 88.949219 144.074219 89.476562 C 143.324219 90.226562 142.800781 91.351562 142.199219 93 C 141 95.925781 139.273438 101.476562 138.523438 106.351562 C 137.625 112.050781 136.273438 124.574219 137.625 125.023438 C 138.601562 125.324219 141.523438 117.75 143.550781 115.726562 C 144.898438 114.449219 146.398438 113.699219 147.675781 113.324219 C 148.574219 113.023438 149.476562 113.023438 150.226562 113.175781 C 150.898438 113.324219 151.574219 113.476562 152.101562 113.925781 C 152.773438 114.523438 153.523438 115.425781 153.898438 116.550781 C 154.351562 118.125 153.675781 121.050781 153.898438 122.625 C 154.125 123.75 154.425781 124.800781 154.875 125.476562 C 155.25 125.925781 155.925781 126.375 156.375 126.375 C 156.75 126.449219 156.898438 126.226562 157.351562 126 C 158.25 125.398438 160.351562 124.199219 161.625 122.550781 C 163.5 120.226562 165.148438 112.5 166.050781 112.351562 C 166.351562 112.273438 166.574219 112.574219 166.726562 113.023438 C 167.398438 114.675781 165.675781 124.125 166.574219 126.226562 C 166.949219 126.976562 167.550781 127.351562 168.148438 127.5 C 168.824219 127.726562 169.726562 127.5 170.398438 127.273438 C 171.226562 126.976562 171.824219 126.601562 172.574219 125.851562 C 174 124.5 176.25 121.199219 177.601562 118.800781 C 178.800781 116.550781 180.601562 111.976562 180.449219 111.898438 C 180.375 111.824219 178.050781 115.125 177.601562 116.773438 C 177.148438 118.199219 177.148438 119.625 177.449219 121.125 C 177.75 122.699219 178.648438 124.574219 179.398438 126 C 180.148438 127.199219 180.976562 128.625 181.875 129.074219 C 182.550781 129.375 183.523438 129.074219 184.199219 128.773438 C 184.726562 128.550781 185.101562 128.175781 185.550781 127.425781 C 186.75 125.699219 188.476562 119.324219 189.601562 117.148438 C 190.125 116.101562 190.425781 115.351562 191.101562 114.898438 C 191.773438 114.449219 192.976562 114 193.574219 114.300781 C 194.175781 114.675781 194.25 115.726562 194.476562 117 C 195 119.851562 195.148438 129.675781 194.476562 131.476562 C 194.324219 131.925781 194.101562 132.148438 193.875 132.226562 C 193.574219 132.226562 193.125 131.925781 192.976562 131.476562 C 192.601562 130.050781 194.773438 124.050781 195.523438 121.273438 C 196.050781 119.25 196.351562 117.601562 197.023438 116.101562 C 197.625 114.75 198.449219 113.324219 199.273438 112.574219 C 199.800781 112.050781 200.398438 111.75 201 111.675781 C 201.601562 111.601562 202.425781 111.675781 202.949219 112.199219 C 203.699219 112.949219 203.925781 114.675781 204.300781 116.398438 C 204.824219 119.175781 204.449219 125.625 205.273438 127.273438 C 205.574219 127.875 205.875 128.101562 206.398438 128.324219 C 207.074219 128.550781 208.273438 128.550781 209.023438 128.25 C 209.625 128.023438 209.925781 127.648438 210.449219 126.976562 C 211.273438 125.851562 212.550781 123.601562 213 121.5 C 213.601562 118.949219 213.523438 115.199219 213.074219 112.648438 C 212.773438 110.625 210.898438 108.074219 211.199219 107.25 C 211.273438 106.875 211.574219 106.949219 212.023438 106.726562 C 213.824219 105.824219 219.75 103.273438 225.75 101.175781 C 236.476562 97.425781 262.5 89.625 271.574219 87.675781 C 275.25 86.851562 278.25 86.175781 279.523438 86.625 C 279.976562 86.773438 280.273438 87.148438 280.273438 87.375 C 280.273438 87.601562 279.675781 88.125 279.449219 88.125"
          stroke="var(--main-text)"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          variants={drawAnimation}
          initial="hidden"
          animate="visible"
        />

        {/* Underline */}
        <motion.path
          d="M 100.12 155.39 C 123.14 149.62 174.82 143.55 200.85 140.32 C 219.97 137.92 237.75 135.82 250.72 134.62 C 258.97 133.8 264.3 133.87 271.05 133.12 C 277.87 132.44 287.25 131.55 291.52 130.42 C 293.62 129.89 295.12 128.69 296.02 128.69"
          stroke="var(--muted-text)"
          strokeWidth="2"
          strokeLinecap="round"
          variants={drawAnimation}
          initial="hidden"
          animate="visible"
          transition={{ delay: 1.2 }}
        />
      </motion.svg>
    </motion.div>
  );
};

const overlayStyles = {
  position: "fixed",
  top: 0,
  left: 0,
  width: "100vw",
  height: "100vh",
  backgroundColor: "var(--main-bg)",
  color: "var(--main-text)",
  display: "flex",
  justifyContent: "center",
  alignItems: "center",
  zIndex: 9999,
  overflow: "hidden",
};

const svgStyles = {
  width: "25%",
  maxWidth: "250px",
  height: "auto",
  display: "block",
};

export default SignatureSplash;
